import{_ as D,u as q,a as G,b as J,c as H,g as K,d as Q,e as z}from"./HWkykGhd.js";import{m as W,e as V,o as l,c as s,r as A,f as L,n as N,g as I,t as g,h as X,i as F,j as f,k as Y,l as Z,p as E,s as ee,q as P,v as te,a as i,b as v,x as c,F as T,y as U,w,d as C,z as ae,A as $}from"./SbJ5_85G.js";import{_ as ne}from"./DlAUqK2U.js";import"./DAhmVyQh.js";import"./CcNotFbT.js";const oe={base:"inline-flex items-center",rounded:"rounded-md",font:"font-medium",size:{xs:"text-xs px-1.5 py-0.5",sm:"text-xs px-2 py-1",md:"text-sm px-2 py-1",lg:"text-sm px-2.5 py-1.5"},gap:{xs:"gap-0.5",sm:"gap-1",md:"gap-1",lg:"gap-1.5"},color:{white:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-900 dark:text-white bg-white dark:bg-gray-900"},gray:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-800"},black:{solid:"text-white dark:text-gray-900 bg-gray-900 dark:bg-white"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},icon:{base:"flex-shrink-0",size:{xs:"h-4 w-4",sm:"h-4 w-4",md:"h-5 w-5",lg:"h-5 w-5"}},default:{size:"sm",variant:"solid",color:"primary"}},m=W(V.ui.strategy,V.ui.badge,oe),le=F({components:{UIcon:D},inheritAttrs:!1,props:{size:{type:String,default:()=>m.default.size,validator(e){return Object.keys(m.size).includes(e)}},color:{type:String,default:()=>m.default.color,validator(e){return[...V.ui.colors,...Object.keys(m.color)].includes(e)}},variant:{type:String,default:()=>m.default.variant,validator(e){return[...Object.keys(m.variant),...Object.values(m.color).flatMap(o=>Object.keys(o))].includes(e)}},label:{type:[String,Number],default:null},icon:{type:String,default:null},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:o,attrs:u}=q("badge",Y(e,"ui"),m),{size:r,rounded:x}=G({ui:o,props:e}),p=f(()=>e.icon&&e.leading||e.icon&&!e.trailing||!e.trailing||e.leadingIcon),h=f(()=>e.icon&&e.trailing||e.trailing||e.trailingIcon),k=f(()=>{const O=o.value.color?.[e.color]?.[e.variant]||o.value.variant[e.variant];return Z(E(o.value.base,o.value.font,x.value,o.value.size[r.value],o.value.gap[r.value],O?.replaceAll("{color}",e.color)),e.class)}),y=f(()=>e.leadingIcon||e.icon),_=f(()=>e.trailingIcon||e.icon),S=f(()=>E(o.value.icon.base,o.value.icon.size[r.value])),j=f(()=>E(o.value.icon.base,o.value.icon.size[r.value]));return{attrs:u,isLeading:p,isTrailing:h,badgeClass:k,leadingIconName:y,trailingIconName:_,leadingIconClass:S,trailingIconClass:j}}}),ie={key:0};function se(e,o,u,r,x,p){const h=D;return l(),s("span",X({class:e.badgeClass},e.attrs),[A(e.$slots,"leading",{},()=>[e.isLeading&&e.leadingIconName?(l(),L(h,{key:0,name:e.leadingIconName,class:N(e.leadingIconClass),"aria-hidden":"true"},null,8,["name","class"])):I("",!0)]),A(e.$slots,"default",{},()=>[e.label!==void 0&&e.label!==null?(l(),s("span",ie,g(e.label),1)):I("",!0)]),A(e.$slots,"trailing",{},()=>[e.isTrailing&&e.trailingIconName?(l(),L(h,{key:0,name:e.trailingIconName,class:N(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])):I("",!0)])],16)}const re=Object.assign(ne(le,[["render",se]]),{__name:"UBadge"}),de={class:"min-h-screen pt-24 px-6 md:px-12 bg-black/90"},ce={class:"flex items-center justify-between mb-8"},ue={class:"flex gap-4 items-center"},ge={class:"flex bg-white/10 rounded-lg p-1"},me=["onClick"],fe={key:0,class:"text-white"},pe={key:1,class:"text-gray-400"},ye={key:2,class:"grid gap-6"},be={class:"flex-1"},ve={class:"flex items-center gap-2 mb-2"},xe={class:"text-xs text-gray-500"},he={class:"text-xl font-bold text-white mb-2"},ke={class:"text-gray-300 text-sm mb-4 line-clamp-2"},_e={class:"text-xs text-blue-400 mb-2"},we={class:"flex gap-2"},Ce={class:"flex md:flex-col gap-2 justify-center min-w-[120px]"},$e={key:1,class:"h-px bg-white/10 my-1"},Ne=F({__name:"admin",setup(e){const o=J(),{language:u}=ee(o),r=$([]),x=$(!0),p=$("pending"),h=["all","pending","approved","rejected"],k=$(null),y=$(!1),_=async()=>{x.value=!0;try{const n=await $fetch(`/api/admin/all_tips?lang=${u.value}`);r.value=n||[]}catch(n){console.error("Failed to fetch tips",n)}finally{x.value=!1}},S=f(()=>p.value==="all"?r.value:r.value.filter(n=>n.status===p.value)),j=async(n,a)=>{try{await $fetch("/api/admin/approve",{method:"POST",body:{id:n,status:a,lang:u.value}});const d=r.value.find(B=>B.id===n);d&&(d.status=a),z().add({title:`Tip ${a}`,color:"green"})}catch(d){z().add({title:"Error",description:d.message,color:"red"})}},O=async n=>{if(confirm("Are you sure you want to delete this tip?"))try{await $fetch("/api/admin/delete",{method:"POST",body:{id:n,lang:u.value}}),r.value=r.value.filter(a=>a.id!==n),z().add({title:"Tip Deleted",color:"green"})}catch(a){z().add({title:"Error",description:a.message,color:"red"})}},M=n=>{k.value=n,y.value=!0};return P(y,n=>{n||(_(),k.value=null)}),P(u,()=>{_()}),te(()=>{_()}),(n,a)=>{const d=H,B=re,R=Q;return l(),s("div",de,[i("div",ce,[a[2]||(a[2]=i("h1",{class:"text-4xl font-bold text-white"},"Admin Panel",-1)),i("div",ue,[v(d,{label:c(u)==="ptbr"?"PT":"EN",variant:"soft",color:"primary",size:"lg",onClick:a[0]||(a[0]=t=>c(o).setLanguage(c(u)==="ptbr"?"en":"ptbr")),ui:{rounded:"rounded-full"}},null,8,["label"]),i("div",ge,[(l(),s(T,null,U(h,t=>i("button",{key:t,onClick:b=>p.value=t,class:N(["px-4 py-2 rounded-md text-sm font-medium transition-colors capitalize",c(p)===t?"bg-purple-600 text-white shadow-lg":"text-gray-400 hover:text-white"])},g(t),11,me)),64))])])]),c(x)?(l(),s("div",fe,"Loading...")):c(S).length===0?(l(),s("div",pe," No tips found for this filter. ")):(l(),s("div",ye,[(l(!0),s(T,null,U(c(S),t=>(l(),s("div",{key:t.id,class:"flex flex-col md:flex-row gap-4 bg-white/5 border border-white/10 p-6 rounded-2xl backdrop-blur-md transition-all hover:bg-white/10"},[i("div",be,[i("div",ve,[i("span",{class:N(["px-2 py-0.5 rounded text-xs font-bold uppercase tracking-wide border",("getCategoryColor"in n?n.getCategoryColor:c(K))(t.category)?.badge||"bg-gray-500 text-white"])},g(t.category),3),i("span",xe,g(t.id),1),v(B,{color:t.status==="approved"?"green":t.status==="pending"?"yellow":"red",variant:"subtle",size:"xs"},{default:w(()=>[C(g(t.status),1)]),_:2},1032,["color"])]),i("h3",he,g(t.title),1),i("p",ke,g(t.description),1),i("div",_e,"Submitted by: "+g(t.email),1),i("div",we,[(l(!0),s(T,null,U(t.highlights,b=>(l(),s("span",{key:b.keyword,class:"text-xs bg-purple-500/20 text-purple-300 px-1.5 py-0.5 rounded"},g(b.keyword),1))),128))])]),i("div",Ce,[t.status==="pending"?(l(),s(T,{key:0},[v(d,{color:"green",variant:"solid",icon:"i-heroicons-check",block:"",onClick:b=>j(t.id,"approved")},{default:w(()=>[...a[3]||(a[3]=[C("Approve",-1)])]),_:1},8,["onClick"]),v(d,{color:"red",variant:"ghost",icon:"i-heroicons-x-mark",block:"",onClick:b=>j(t.id,"rejected")},{default:w(()=>[...a[4]||(a[4]=[C("Reject",-1)])]),_:1},8,["onClick"])],64)):I("",!0),t.status==="pending"?(l(),s("div",$e)):I("",!0),v(d,{color:"blue",variant:"soft",icon:"i-heroicons-pencil-square",block:"",onClick:b=>M(t)},{default:w(()=>[...a[5]||(a[5]=[C("Edit",-1)])]),_:1},8,["onClick"]),v(d,{color:"red",variant:"soft",icon:"i-heroicons-trash",block:"",onClick:b=>O(t.id)},{default:w(()=>[...a[6]||(a[6]=[C("Delete",-1)])]),_:1},8,["onClick"])])]))),128))])),v(R,{modelValue:c(y),"onUpdate:modelValue":a[1]||(a[1]=t=>ae(y)?y.value=t:null),"initial-data":c(k),"is-edit":!0},null,8,["modelValue","initial-data"])])}}});export{Ne as default};
